<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Creepy Loader</title>
<style>
    html, body {
        margin: 0;
        height: 100%;
        overflow: hidden;
        background: #000;
        user-select: none;
    }

    #crt {
        width: 100%;
        height: 100%;
        position: fixed;
        top: 0;
        left: 0;
        pointer-events: none;
        background: repeating-linear-gradient(
            rgba(255,255,255,0.04) 0px,
            rgba(255,255,255,0.04) 1px,
            transparent 2px,
            transparent 4px
        );
        mix-blend-mode: overlay;
        z-index: 50;
    }

    .loader {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
    }

    .cookie {
        width: 180px;
        transition: transform 0.1s;
        image-rendering: pixelated;
    }

    #fakeXP {
        position: fixed;
        top: 20%;
        left: 50%;
        transform: translateX(-50%);
        background: #efefef;
        border: 2px solid #000;
        width: 280px;
        padding: 10px;
        font-family: Arial;
        font-size: 14px;
        display: none;
        z-index: 100;
    }

    #jumpscare {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: none;
        z-index: 200;
        animation: zoom 0.25s ease-in forwards;
    }

    @keyframes zoom {
        from { transform: scale(1); }
        to { transform: scale(1.4); }
    }

</style>
</head>
<body>

<div id="crt"></div>

<div class="loader">
    <img id="cookie" class="cookie" src="assets/cookie_full.png">
</div>

<div id="fakeXP">
    <b>Windows XP Warning</b><br><br>
    Unknown PNG header detected.<br><br>
    <button onclick="closeXP()">OK</button>
</div>

<img id="jumpscare" src="assets/jumpscare.png">

<script>
let cookie = document.getElementById("cookie");
let clicks = 0;
let loading = 0;
let xpShown = false;

// fake loading mechanic with stops
function fakeLoadStep() {
    if (loading >= 100) return;

    loading += Math.random() * 25;

    if (loading > 100) loading = 100;

    cookie.style.transform = `scale(${1 + loading/250})`;

    if (Math.random() < 0.4) {
        setTimeout(fakeLoadStep, 500); // stop/pause effect
    } else {
        setTimeout(fakeLoadStep, 120);
    }
}

fakeLoadStep();

cookie.addEventListener("click", () => {
    clicks++;
    cookie.style.transform = "scale(0.9)";
    setTimeout(() => cookie.style.transform = "scale(1)", 100);

    if (!xpShown && clicks >= 3) {
        document.getElementById("fakeXP").style.display = "block";
        xpShown = true;
    }

    if (clicks === 10) {
        triggerJumpscare();
    }
});

function closeXP() {
    document.getElementById("fakeXP").style.display = "none";
}

function triggerJumpscare() {
    const j = document.getElementById("jumpscare");
    j.style.display = "block";
}
</script>

</body>
</html>
