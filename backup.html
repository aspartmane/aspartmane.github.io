<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Yearn</title>
<style>
    html, body {
        margin: 0;
        padding: 0;
        height: 100%;
        overflow: hidden;
        background: url('assets/background.png') no-repeat center center fixed;
        background-size: cover;
    }

    #blob {
        position: absolute;
        top: 50%;
        left: 50%;
        width: 260px;
        height: 260px;
        transform: translate(-50%, -50%);
        transition: opacity 1.2s linear, transform 0.25s ease;
        image-rendering: pixelated;
        cursor: pointer;
        opacity: 1;
    }
</style>
</head>
<body>

<img id="blob" src="assets/blob1.png">

<script>
    const blob = document.getElementById("blob");

    // Breathing frames
    const frames = [
        "assets/blob1.png",
        "assets/blob2.png",
        "assets/blob3.png",
        "assets/blob4.png"
    ];

    let frameIndex = 0;

    // Smooth crossfade function
    function nextFrame() {
        blob.style.opacity = "0.4"; // fade halfway down

        setTimeout(() => {
            frameIndex = (frameIndex + 1) % frames.length;
            blob.src = frames[frameIndex];
            blob.style.opacity = "1"; // fade up
        }, 1200); // halfway through cycle
    }

    // Slow breathing loop (2.4s)
    setInterval(nextFrame, 2400);

    // CLICK DISTORTION
    let clickTimes = [];

    blob.addEventListener("click", () => {
        const now = Date.now();
        clickTimes.push(now);

        clickTimes = clickTimes.filter(t => now - t < 800); // keep recent 800ms

        // Normal click pulse
        blob.style.transform = "translate(-50%, -50%) scale(0.94)";
        setTimeout(() => {
            blob.style.transform = "translate(-50%, -50%) scale(1)";
        }, 130);

        // Too-fast clicking = distorted breathing creature
        if (clickTimes.length >= 3) {
            blob.style.transition = "transform 0.1s ease";
            blob.style.transform = "translate(-50%, -50%) scale(1.15) skewX(8deg)";

            setTimeout(() => {
                blob.style.transform = "translate(-50%, -50%) scale(1)";
                blob.style.transition = "transform 0.25s ease";
            }, 150);
        }
    });
</script>

</body>
</html>
