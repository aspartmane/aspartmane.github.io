<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Cookie Game</title>

<style>
    body {
        margin: 0;
        background: black;
        overflow: hidden;
    }

    .cookie {
        position: absolute;
        top: 50%;
        left: 50%;
        width: 220px;
        transform: translate(-50%, -50%);
        cursor: pointer;
        transition: transform 0.12s cubic-bezier(.25,.8,.25,1);
    }

    #loadingMask {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: black;
        display: none;
        z-index: 2000;
    }

    #jumpscare {
        position: absolute;
        top: 50%;
        left: 50%;
        width: 140%;
        transform: translate(-50%, -50%);
        display: none;
        z-index: 9999;
    }
</style>
</head>

<body>

<!-- COOKIE 1 -->
<img id="cookie1" class="cookie" src="assets/cookie1.png">

<!-- COOKIE 2 -->
<img id="cookie2" class="cookie" src="assets/cookie2.png" style="display:none;">

<!-- LOADING MASK -->
<div id="loadingMask"></div>

<!-- JUMPSCARE -->
<img id="jumpscare" src="assets/jumpscare.png">

<script>
window.onload = () => {
    let click1 = 0;
    let click2 = 0;

    const c1 = document.getElementById("cookie1");
    const c2 = document.getElementById("cookie2");
    const mask = document.getElementById("loadingMask");
    const jump = document.getElementById("jumpscare");

    // ------------------------
    // COOKIE 1 CLICK ANIMATION
    // ------------------------
    c1.onclick = () => {
        click1++;

        c1.style.transform = "translate(-50%, -50%) scale(0.9)";
        setTimeout(() => {
            c1.style.transform = "translate(-50%, -50%) scale(1)";
        }, 120);

        if (click1 >= 5) {
            c1.style.display = "none";
            loadCookie2();
        }
    };

    // ------------------------
    // COOKIE 2 LOADING MASK
    // ------------------------
    function loadCookie2() {
        c2.style.display = "block";
        mask.style.display = "block";
        mask.style.height = "100%";

        let progress = 100;

        function step() {
            progress -= 5;
            if (progress < 0) progress = 0;

            mask.style.height = progress + "%";

            if ([80, 50, 25].includes(progress)) {
                setTimeout(step, 120);
            } else if (progress > 0) {
                setTimeout(step, 25);
            } else {
                mask.style.display = "none";
            }
        }
        step();
    }

    // ------------------------
    // COOKIE 2 ZOOM CLICK
    // ------------------------
    c2.onclick = () => {
        if (mask.style.display === "block") return;

        click2++;

        const zoom = 1 + click2 * 0.03;
        c2.style.transform = `translate(-50%, -50%) scale(${zoom})`;

        if (click2 >= 10) {
            triggerJumpscare();
        }
    };

    // ------------------------
    // JUMPSCARE
    // ------------------------
    function triggerJumpscare() {
        c2.style.display = "none";

        jump.style.display = "block";
        jump.style.zIndex = "9999";
        jump.style.transform = "translate(-50%, -50%) scale(1)";

        requestAnimationFrame(() => {
            jump.animate(
                [
                    { transform: "translate(-50%, -50%) scale(1)" },
                    { transform: "translate(-50%, -50%) scale(4)" }
                ],
                {
                    duration: 100,
                    easing: "ease-out",
                    fill: "forwards"
                }
            );
        });
    }
};
</script>

</body>
</html>
