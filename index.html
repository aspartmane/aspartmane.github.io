<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Yearn</title>
<style>
    html, body {
        margin: 0;
        padding: 0;
        height: 100%;
        overflow: hidden;
        background: url('assets/background.png') no-repeat center center fixed;
        background-size: cover;
    }

    #blob {
        position: absolute;
        top: 50%;
        left: 50%;
        width: 260px;
        height: 260px;
        transform: translate(-50%, -50%) scale(1);
        transition: transform 1.2s ease-in-out;
        image-rendering: pixelated;
        cursor: pointer;
    }
</style>
</head>
<body>

<img id="blob" src="assets/blob1.png">

<script>
    const blob = document.getElementById("blob");

    const frames = [
        "assets/blob1.png",
        "assets/blob2.png",
        "assets/blob3.png",
        "assets/blob4.png"
    ];

    let index = 0;

    // Smooth breathing — NO fading, only morph-like scaling
    function breathe() {
        // inhale (grow slightly)
        blob.style.transform = "translate(-50%, -50%) scale(1.08)";

        // halfway through inhale -> switch frame quietly
        setTimeout(() => {
            index = (index + 1) % frames.length;
            blob.src = frames[index];
        }, 1200);

        // exhale (back to normal)
        setTimeout(() => {
            blob.style.transform = "translate(-50%, -50%) scale(1)";
        }, 2400);
    }

    setInterval(breathe, 2400);

    // --- CLICK DISTORTION ---
    let clickTimes = [];
    blob.addEventListener("click", () => {
        const now = Date.now();
        clickTimes.push(now);
        clickTimes = clickTimes.filter(t => now - t < 800);

        // normal click pulse
        blob.style.transform = "translate(-50%, -50%) scale(0.94)";
        setTimeout(() => {
            blob.style.transform = "translate(-50%, -50%) scale(1)";
        }, 150);

        // too-fast clicking = distortion
        if (clickTimes.length >= 3) {
            blob.style.transition = "transform 0.15s ease";
            blob.style.transform = "translate(-50%, -50%) scale(1.2) skewX(10deg)";

            setTimeout(() => {
                blob.style.transition = "transform 1.2s ease-in-out";
                blob.style.transform = "translate(-50%, -50%) scale(1)";
            }, 180);
        }
    });

    // --- RANDOM "SHIFT TOWARD YOU" MOMENTS ---
    function stareEvent() {
        blob.style.transition = "transform 1.4s ease";
        blob.style.transform = "translate(-50%, -50%) scale(1.15) translateY(-10px)";

        // return to normal slowly
        setTimeout(() => {
            blob.style.transform = "translate(-50%, -50%) scale(1)";
        }, 2600);
    }

    // every 10–20 seconds it randomly "leans toward" the player
    setInterval(() => {
        if (Math.random() < 0.4) {
            stareEvent();
        }
    }, 10000);

</script>

</body>
</html>
