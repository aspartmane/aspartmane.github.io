<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>YEAR N</title>
    <style>
        body {
            margin: 0;
            background: url('background.png') center top;
            background-size: cover;
            height: 100vh;
            overflow: hidden;
        }

        #blob {
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%) scale(1);
            image-rendering: pixelated;
            width: 260px;
            height: auto;
            transition: transform 0.12s linear;
        }
    </style>
</head>
<body>

    <img id="blob" src="blob1.png">

    <script>
        const frames = ["blob1.png", "blob2.png", "blob4.png", "blob2.png"];
        let frameIndex = 0;

        let breathing = true;
        let clickingFast = false;
        let lastClickTime = 0;
        let stareTimeout = null;

        const blob = document.getElementById("blob");

        // Breathing Animation
        function breathe() {
            if (!breathing) return;

            frameIndex = (frameIndex + 1) % frames.length;
            blob.src = frames[frameIndex];

            // Zoom logic:
            // blob1 → normal
            // blob2 → slight inhale zoom-out
            // blob4 → exhale zoom-in

            if (blob.src.includes("blob1")) {
                blob.style.transform = "translate(-50%, -50%) scale(1)";
            }
            else if (blob.src.includes("blob2")) {
                blob.style.transform = "translate(-50%, -50%) scale(0.97)";
            }
            else if (blob.src.includes("blob4")) {
                blob.style.transform = "translate(-50%, -50%) scale(1.05)";
            }

            setTimeout(breathe, 550); // slow breathing rhythm
        }

        breathe();

        // CLICK INTERACTION
        document.body.addEventListener("click", () => {
            const now = Date.now();

            // Detect fast clicking
            if (now - lastClickTime < 250) {
                clickingFast = true;
                triggerStare();
            }

            lastClickTime = now;
        });

        function triggerStare() {
            if (!breathing) return; // already staring

            breathing = false;

            // Freeze on blob4
            blob.src = "blob4.png";
            blob.style.transform = "translate(-50%, -50%) scale(1.1)";

            // Clear old timeout if spam continues
            if (stareTimeout) clearTimeout(stareTimeout);

            // Wait until player stops clicking
            stareTimeout = setTimeout(() => {
                clickingFast = false;
                breathing = true;
                frameIndex = 0;
                breathe();
            }, 3200); // must stop clicking ~3 sec
        }
    </script>

</body>
</html>
