<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Yearn</title>
<style>
    html, body {
        margin: 0;
        padding: 0;
        height: 100%;
        overflow: hidden;
        background: url('assets/background.png') no-repeat top center fixed;
        background-size: 120% 120%; /* stretch more */
    }

    #blob {
        position: absolute;
        top: 50%;
        left: 50%;
        width: 260px;
        height: 260px;
        transform: translate(-50%, -50%) scale(1);
        transition: transform 0.9s ease-in-out;
        image-rendering: pixelated;
        cursor: pointer;
    }
</style>
</head>
<body>

<img id="blob" src="assets/blob1.png">

<script>
    const blob = document.getElementById("blob");

    const frames = [
        "assets/blob1.png",
        "assets/blob2.png",
        "assets/blob3.png",
        "assets/blob4.png"
    ];

    let index = 0;
    let breathing = true;
    let irregularCycle = false;

    // --- STRONGER, FASTER NORMAL BREATHING ---
    function normalBreath() {
        if (!breathing) return;

        // Inhale (more noticeable)
        blob.style.transition = "transform 0.9s ease-in-out";
        blob.style.transform = "translate(-50%, -50%) scale(1.12)";

        // Swap frame at inhale peak
        setTimeout(() => {
            if (!breathing) return;
            index = (index + 1) % frames.length;
            blob.src = frames[index];
        }, 450);

        // Exhale
        setTimeout(() => {
            if (!breathing) return;
            blob.style.transform = "translate(-50%, -50%) scale(1)";
        }, 900);
    }

    // Faster breathing cycle
    setInterval(normalBreath, 900);


    // --- EXTREME IRREGULAR BREATHING TWITCH ---
    function irregularBreathingEvent() {
        if (irregularCycle) return;
        irregularCycle = true;

        // Hard twitch inhale
        blob.style.transition = "transform 0.18s ease";
        blob.style.transform = "translate(-50%, -50%) scale(1.22) rotate(4deg)";

        setTimeout(() => {
            // sudden collapse
            blob.style.transition = "transform 0.12s ease";
            blob.style.transform = "translate(-50%, -50%) scale(0.88) rotate(-5deg)";

            setTimeout(() => {
                // recover with a shake
                blob.style.transition = "transform 1.1s ease-in-out";
                blob.style.transform = "translate(-50%, -50%) scale(1) rotate(0deg)";
                irregularCycle = false;
            }, 240);

        }, 200);
    }

    // Trigger irregular glitch every ~10â€“14 seconds
    setInterval(() => {
        if (Math.random() < 0.45) irregularBreathingEvent();
    }, 12000);


    // --- CLICK REACTIVITY ---
    let clickTimes = [];

    blob.addEventListener("click", () => {
        const now = Date.now();
        clickTimes.push(now);
        clickTimes = clickTimes.filter(t => now - t < 1800);

        // normal click compression
        blob.style.transition = "transform 0.12s ease";
        blob.style.transform = "translate(-50%, -50%) scale(0.9)";

        setTimeout(() => {
            blob.style.transition = "transform 0.5s ease";
            blob.style.transform = "translate(-50%, -50%) scale(1)";
        }, 140);

        // too much clicking triggers HARD tweak
        if (clickTimes.length >= 10) {
            clickTimes = []; 
            creatureStareTweak();
        }
    });

    // --- STARE / TWEAK EVENT (NO GHOST YET) ---
    function creatureStareTweak() {
        breathing = false;

        // freeze, jolt forward
        blob.style.transition = "transform 0.18s ease";
        blob.style.transform = "translate(-50%, -50%) scale(1.3) rotate(-3deg)";

        setTimeout(() => {
            // tighter stare position
            blob.style.transition = "transform 0.25s ease";
            blob.style.transform = "translate(-50%, -50%) scale(1.32) rotate(0deg)";
        }, 240);

        // hold the stare
        setTimeout(() => {
            breathing = true;
            blob.style.transition = "transform 1.4s ease";
            blob.style.transform = "translate(-50%, -50%) scale(1)";
        }, 1500);
    }
</script>

</body>
</html>
