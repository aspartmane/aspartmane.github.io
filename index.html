<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Yearn</title>
<style>
    html, body {
        margin: 0;
        padding: 0;
        height: 100%;
        overflow: hidden;
        background: url('assets/background.png') no-repeat center center fixed;
        background-size: cover;
    }

    #blob {
        position: absolute;
        top: 50%;
        left: 50%;
        width: 260px;
        height: 260px;
        transform: translate(-50%, -50%) scale(1);
        transition: transform 1.2s ease-in-out;
        image-rendering: pixelated;
        cursor: pointer;
    }
</style>
</head>
<body>

<img id="blob" src="assets/blob1.png">

<script>
    const blob = document.getElementById("blob");

    const frames = [
        "assets/blob1.png",
        "assets/blob2.png",
        "assets/blob3.png",
        "assets/blob4.png"
    ];

    let index = 0;
    let breathing = true;
    let irregularCycle = false;

    // --- SMOOTH NORMAL BREATHING ---
    function normalBreath() {
        if (!breathing) return;

        blob.style.transition = "transform 1.4s ease-in-out";
        blob.style.transform = "translate(-50%, -50%) scale(1.075)";

        setTimeout(() => {
            if (!breathing) return;
            index = (index + 1) % frames.length;
            blob.src = frames[index];
        }, 700);

        setTimeout(() => {
            if (!breathing) return;
            blob.style.transform = "translate(-50%, -50%) scale(1)";
        }, 1400);
    }

    setInterval(normalBreath, 1400);

    // --- IRREGULAR, SHAKY, TOO-REAL BREATHING MOMENTS ---
    function irregularBreathingEvent() {
        if (irregularCycle) return;
        irregularCycle = true;

        setTimeout(() => {
            // shaky inhale
            blob.style.transition = "transform 0.45s ease";
            blob.style.transform = "translate(-50%, -50%) scale(1.11) rotate(1deg)";

            setTimeout(() => {
                // glitchy exhale
                blob.style.transition = "transform 0.25s ease";
                blob.style.transform = "translate(-50%, -50%) scale(0.96) rotate(-2deg)";

                setTimeout(() => {
                    // recover slowly
                    blob.style.transition = "transform 1.6s ease-in-out";
                    blob.style.transform = "translate(-50%, -50%) scale(1) rotate(0deg)";
                    irregularCycle = false;
                }, 500);

            }, 550);

        }, 100);
    }

    // triggers irregular breathing every 12–18 seconds
    setInterval(() => {
        if (Math.random() < 0.6) irregularBreathingEvent();
    }, 15000);


    // --- CLICK REACTIONS ---
    let clickTimes = [];

    blob.addEventListener("click", () => {
        const now = Date.now();
        clickTimes.push(now);
        clickTimes = clickTimes.filter(t => now - t < 2000);

        // normal click pulse
        blob.style.transition = "transform 0.15s ease";
        blob.style.transform = "translate(-50%, -50%) scale(0.94)";

        setTimeout(() => {
            blob.style.transition = "transform 0.6s ease";
            blob.style.transform = "translate(-50%, -50%) scale(1)";
        }, 160);

        // if too many interactions → IT WATCHES YOU
        if (clickTimes.length >= 12) {
            clickTimes = []; 
            creatureStare();
        }
    });

    // --- THE WATCHING EVENT ---
    function creatureStare() {
        breathing = false; // stop normal breathing

        // hard freeze
        blob.style.transition = "transform 0.2s ease";
        blob.style.transform = "translate(-50%, -50%) scale(1.11) rotate(1.5deg)";

        setTimeout(() => {
            blob.style.transform = "translate(-50%, -50%) scale(1.14) rotate(0deg)";
        }, 250);

        // hold the stare
        setTimeout(() => {
            breathing = true;
            blob.style.transition = "transform 1.6s ease-in-out";
            blob.style.transform = "translate(-50%, -50%) scale(1)";
        }, 1600);
    }
</script>

</body>
</html>
